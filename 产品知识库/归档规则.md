# 归档规则

目的：把“原始内容 → 可用知识”的流程标准化，方便后续持续添加。

## 目录职责
- **01-产品与设计 ~ 06-其他**：最终可读、精炼的知识条目（md/txt）。
- **原始数据/**：永久保留原始内容与 OCR 原文。
- **资源文件/**：临时/处理中间文件；如需长期保留，转入 `原始数据/`。

## 原始内容归档
把你上传的原始内容统一放到：`原始数据/` 下对应子目录。
- `原始数据/图片/`：照片、截图、扫描件
- `原始数据/文档/`：PDF、Word、PPT 等
- `原始数据/网页/`：网页链接或快照
- `原始数据/OCR文本/`：OCR 原文、日志、中间合并文本
- `原始数据/待处理/`：上传入口（自动处理）  

自动处理流程：
1. 把文件放入 `原始数据/待处理/`  
2. 运行 `backend/kb_process_inbox.sh`（或后台运行 `backend/kb_watch_inbox.sh`）  
3. OCR 文本生成到 `原始数据/OCR文本/`，原文件移动到对应目录  
4. 自动清理 `*.log`、`*.bak`、`*_merged.txt`
5. 自动运行 `python ingest.py --essentials` 更新索引（可通过 `AUTO_INGEST=0` 关闭）
6. 自动生成 Sparks 卡片到前端（可通过 `AUTO_SPARKS=0` 关闭）

## 处理后的知识条目
输出到主题目录（01-06）。优先按“知识用途”归类：
- **01-产品与设计**：产品策略、用户体验、功能设计、命名/ASO 等
- **02-商业与战略**：商业模式、增长、战略、定价
- **03-思维与认知**：思维模型、决策、认知偏差
- **04-成长与效能**：学习方法、效率、习惯与成长
- **05-技术与AI**：技术趋势、AI 应用、工程方法
- **06-其他**：无法明确归类或跨多领域

## 命名规则（建议）
- 统一短标题：3~12 字为宜，聚焦内容核心
- 格式：`主题名.md` 或 `主题名.txt`
- 如来自特定来源：`主题名-来源.md`
- 如果是版本更新：`主题名-v2.md`

## 最低内容结构（建议）
- 标题
- 来源（原始文件路径/链接）
- 核心观点（3~7 条）
- 可执行规则/行动建议（可选）

## 归档示例
- 原始图片：`原始数据/图片/2026-01-23-命名截图.jpg`
- OCR 原文：`原始数据/OCR文本/IMG_9096-9103_merged.txt`
- 精炼条目：`01-产品与设计/APP命名.md`

如需新增分类目录，先判断是否长期复用：
- **长期复用**：创建新目录（如 `07-增长与运营`）
- **临时内容**：放入 `06-其他`
